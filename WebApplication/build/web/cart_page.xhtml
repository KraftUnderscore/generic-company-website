<ui:composition template="/WEB-INF/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="title">Koszyk</ui:define>

    <ui:define name="header">
        <header>
            <h1>Koszyk</h1>
        </header>
    </ui:define>

    <ui:define name="content">
        <div class="whole_blob">
            <c:if test="#{not empty cartBean and cartBean.cartProducts.size() ne 0}">
                <div class="cart_product_list">
                    <div class="cart_product">
                        <h2><strong>Produkty w zamówieniu:</strong></h2>
                    </div>
                    <c:forEach var="product" items="${cartBean.cartProducts}">
                        <div class="cart_product">
                            <h:outputText value="#{product.name} cena: #{product.price}" />
                        </div>
                    </c:forEach>
                    <div class="cart_product">
                        <h:outputLabel>Ilość produktów w koszyku: #{cartBean.cartProducts.size()}</h:outputLabel>
                    </div>
                    <div class="cart_product">
                        <h:outputLabel>Cena za produkty: #{cartBean.getPrice()}</h:outputLabel>
                    </div>
                </div>
                <div class="order_details">
                    <h:form>
                        <strong>Dostawa:</strong>
                        <h:selectOneRadio value="#{orderBean.shipment_name}" required="true">
                            <c:forEach var="shipment_choice" items="${orderBean.shipmentOptions}">
                                <f:selectItem itemValue="#{shipment_choice.shipment_name}" itemLabel="#{shipment_choice.shipment_name} Cena: #{shipment_choice.shipment_prize}"/>
                            </c:forEach>
                        </h:selectOneRadio>
                        <strong>Płatność:</strong>
                        <h:selectOneRadio value="#{orderBean.chosenPayment}" required="true">
                            <c:forEach var="s" items="${orderBean.paymentOptions}">
                                <f:selectItem itemValue="#{s}" itemLabel="#{s}"/>
                            </c:forEach>
                        </h:selectOneRadio>
                        <h:commandButton value="Wybierz" action="#{orderBean.constructChosenShipment}" />
                    </h:form>
                    <h:outputLabel>Cena calkowita: #{orderBean.getActualPrice()}</h:outputLabel>
                </div>
            </c:if>
            <c:if test="#{orderBean.isEverythingSet()}">
                <h4><h:link value="Złóż zamówienie" outcome="order_summary"/></h4>
            </c:if>
            <c:if test="#{empty cartBean or cartBean.cartProducts.size() eq 0}">
                <h1>Add something to shopping cart first...</h1>
            </c:if>
            <h4><h:link value="Wróć do przeglądania produktów" outcome="product_list"/></h4>
        </div>
    </ui:define>

    <ui:define name="footer">
        <footer>
            <h4><h:link value="Powrót na stronę główną" outcome="index"/></h4>
        </footer>
    </ui:define>

</ui:composition>